---
const navItems = [
  {
    title: "Experiencia",
    label: "experiencia",
    url: "/#experiencia",
  },
  {
    title: "Proyectos",
    label: "proyectos",
    url: "/#proyectos",
  },
  {
    title: "Sobre mí",
    label: "sobre-mi",
    url: "/#sobre-mi",
  },
  {
    title: "Contacto",
    label: "contacto",
    url: "mailto:javierub38@gmail.com",
  },
]


---

<header
  class="fixed top-0 z-10 hidden sm:flex items-center justify-center w-full mx-auto mt-2"
>
  <nav
    class="flex px-3 text-sm font-medium rounded-full text-gray-600 dark:text-gray-200 justify-center items-center gap-4"
  >
        <a
          class="relative block px-2 py-2 transition hover:text-blue-600 "
          id="scroll-top-btn"
        >
  		<div class="hover:scale-120 rounded-full transition-all px-2">
		  <img src="../../logo.webp" alt="" class="size-7  ">
		</div>
        </a>
    {
      navItems.map((link) => (
        <a
          class="relative block px-2 py-2 transition hover:text-blue-400"
          aria-label={link.label}
          href={link.url}
        >
          {link.title}
        </a>
      ))
    }
  </nav>
</header>

<script is:inline>
	document.addEventListener("DOMContentLoaded", function() {
		console.log("Navbar script loaded");
		const scrollTopBtn = document.getElementById("scroll-top-btn");
		
		if (scrollTopBtn) {
			console.log("Botón volver arriba encontrado");
			
			// Función para obtener la posición del scroll de manera confiable
			function getScrollPosition() {
				return window.pageYOffset || 
				       document.documentElement.scrollTop || 
				       document.body.scrollTop || 
				       0;
			}
			
			// Agregar listener para scroll para debug
			window.addEventListener('scroll', function() {
				console.log("Scroll detectado, posición:", getScrollPosition());
			});
			
			scrollTopBtn.addEventListener("click", function(e) {
				e.preventDefault();
				const currentPosition = getScrollPosition();
				console.log("Click en volver arriba");
				console.log("Posición actual:", currentPosition);

				if (currentPosition === 0) {
					console.log("Ya estás en la parte superior");
					return;
				}

				// Múltiples métodos para asegurar que funcione
				try {
					// Método principal
					window.scrollTo({ top: 0, behavior: "smooth" });
					setTimeout(() => {
						const newPosition = getScrollPosition();
						if (newPosition > 10) {
							console.log("Usando fallback scroll");
							document.documentElement.scrollTop = 0;
							document.body.scrollTop = 0;
							window.scrollTo(0, 0);
						}
					}, 100);
				} catch (error) {
					console.error("Error en scroll:", error);
					document.documentElement.scrollTop = 0;
					document.body.scrollTop = 0;
					window.scrollTo(0, 0);
				}
			});
		} else {
			console.error("Botón volver arriba no encontrado");
		}
	});
</script>

<style>
  nav {
	background-color: oklch(27.8% 0.033 256.848);
    animation: nav-shadown 1s linear both;
    animation-timeline: scroll();
    animation-range: 0 100px;
    border: 1px solid transparent;
    transition: border-color 0.3s ease;
  }

  @keyframes nav-shadown {
    from {
      background-color: transparent;
      border-color: transparent;
      box-shadow: none;
    }
    to {
      background-color: oklch(27.8% 0.033 256.848);
      border-color: rgb(255 255 255 / 0.1);
      box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }
  }
</style>